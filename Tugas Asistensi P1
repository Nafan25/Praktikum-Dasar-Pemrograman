#include <stdio.h>

#define MAX_BARANG 100

typedef struct {
    char nama[50];
    float harga;
    int jumlah;
    float diskon;
} Barang;

void tambahBarang(Barang *b, int *count) {
    if (*count < MAX_BARANG) {
        printf("Masukkan nama barang: ");
        scanf("%s", b[*count].nama);
        printf("Masukkan harga barang: ");
        scanf("%f", &b[*count].harga);
        printf("Masukkan jumlah barang: ");
        scanf("%d", &b[*count].jumlah);
        printf("Masukkan diskon (dalam persen): ");
        scanf("%f", &b[*count].diskon);
        (*count)++;
    } else {
        printf("Batas maksimum barang telah tercapai!\n");
    }
}

void tampilkanStruk(Barang *b, int count) {
    printf("\n--- Struk Pembelian ---\n");
    for (int i = 0; i < count; i++) {
        float totalHarga = b[i].harga * b[i].jumlah;
        float hargaDiskon = totalHarga - (totalHarga * (b[i].diskon / 100));
        
        printf("\nBarang %d:\n", i + 1);
        printf("Nama Barang: %s\n", b[i].nama);
        printf("Harga: %.2f\n", b[i].harga);
        printf("Jumlah: %d\n", b[i].jumlah);
        printf("Diskon: %.2f%%\n", b[i].diskon);
        printf("Harga Sebelum Diskon: %.2f\n", totalHarga);
        printf("Harga Setelah Diskon: %.2f\n", hargaDiskon);
    }
    printf("-----------------------\n");
}

int main() {
    Barang barang[MAX_BARANG];
    int count = 0;
    int pilihan;

    do {
        printf("\n--- Menu Mesin Kasir ---\n");
        printf("1. Tambah Barang\n");
        printf("2. Tampilkan Struk\n");
        printf("3. Keluar\n");
        printf("Pilih opsi (1-3): ");
        scanf("%d", &pilihan);

        switch (pilihan) {
            case 1:
                tambahBarang(barang, &count);
                break;
            case 2:
                tampilkanStruk(barang, count);
                break;
            case 3:
                printf("Terima kasih! Selamat tinggal.\n");
                break;
            default:
                printf("Pilihan tidak valid! Silakan coba lagi.\n");
        }
    } while (pilihan != 3);

    return 0;
}
